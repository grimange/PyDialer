# ==============================================================================
# PyDialer Environment Configuration Example
# ==============================================================================
# Copy this file to .env and update the values according to your environment
# 
# This Django Channels-based predictive dialer system requires configuration
# for database, Redis, email, telephony integration, and various call center
# specific settings.
#
# For production deployment, ensure all sensitive values are properly secured
# and never commit actual credentials to version control.
# ==============================================================================

# ==============================================================================
# DJANGO CORE SETTINGS
# ==============================================================================

# SECURITY WARNING: Generate a new secret key for production
# You can generate one using: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
DJANGO_SECRET_KEY=your-super-secret-key-here-change-this-in-production

# Environment (development, staging, production)
DJANGO_ENVIRONMENT=development

# Debug mode - MUST be False in production
DEBUG=True

# Allowed hosts (comma-separated list for production)
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com

# Admin users (format: Name:email,Name2:email2)
DJANGO_ADMINS=Admin Name:admin@yourdomain.com,Dev Team:dev@yourdomain.com

# Health check IPs (comma-separated)
ALLOWED_HEALTH_CHECK_IPS=127.0.0.1,10.0.0.0/8

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Primary database configuration
DB_CONNECTION=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_NAME=vicidial_prod
DB_USER=vicidial_user
DB_PASSWORD=your-secure-database-password

# Database prefix for tables (if using shared database)
DB_PREFIX=

# Read replica configuration (optional for high-availability)
DB_READ_HOST=
DB_READ_PORT=5432
DB_READ_NAME=
DB_READ_USER=
DB_READ_PASSWORD=

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
# Redis is used for Django Channels (WebSocket), caching, and Celery message broker

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Channels encryption key for WebSocket security
CHANNELS_ENCRYPTION_KEY=your-channels-encryption-key-32-chars

# ==============================================================================
# CELERY CONFIGURATION
# ==============================================================================
# Background task processing for predictive dialing, CDR processing, etc.

CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Celery monitoring
CELERY_FLOWER_USER=admin
CELERY_FLOWER_PASSWORD=secure-flower-password

# ==============================================================================
# EMAIL CONFIGURATION
# ==============================================================================
# For notifications, alerts, and system emails

EMAIL_HOST=smtp.yourmailserver.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=noreply@yourdomain.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=PyDialer <noreply@yourdomain.com>
SERVER_EMAIL=PyDialer Server <server@yourdomain.com>

# ==============================================================================
# FILE STORAGE CONFIGURATION
# ==============================================================================

# Local file storage paths
STATIC_ROOT=/var/www/staticfiles
MEDIA_ROOT=/var/www/media
RECORDING_STORAGE_PATH=/var/recordings

# AWS S3 Configuration (optional, for cloud storage)
USE_S3=False
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_STORAGE_BUCKET_NAME=your-s3-bucket-name
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=cdn.yourdomain.com

# ==============================================================================
# CALL CENTER SETTINGS
# ==============================================================================

# Recording configuration
MAX_RECORDING_SIZE_MB=500
RECORDING_RETENTION_DAYS=90

# Default timezone for campaigns
DEFAULT_TIMEZONE=America/New_York

# Call limits and timeouts
MAX_CALL_DURATION=3600
DEFAULT_WRAP_UP_TIME=30
MAX_CONCURRENT_CALLS_PER_AGENT=1

# ==============================================================================
# TELEPHONY INTEGRATION
# ==============================================================================

# Primary telephony provider (asterisk, freeswitch, twilio, etc.)
TELEPHONY_PROVIDER=asterisk

# Asterisk/FreeSWITCH Configuration
PBX_HOST=localhost
PBX_PORT=5038
PBX_USERNAME=asterisk
PBX_PASSWORD=your-pbx-password
PBX_CONTEXT=from-internal

# Twilio Configuration (if using Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# SIP Configuration
SIP_PROXY=sip.yourdomain.com
SIP_PORT=5060
SIP_USERNAME=your-sip-username
SIP_PASSWORD=your-sip-password

# ==============================================================================
# COMPLIANCE & DNC SETTINGS
# ==============================================================================

# Do Not Call list integration
DNC_PROVIDER=internal
DNC_API_KEY=your-dnc-api-key
DNC_API_URL=https://api.donotcall.gov

# Recording consent settings
REQUIRE_RECORDING_CONSENT=True
RECORDING_CONSENT_TIMEOUT=30

# Compliance audit settings
ENABLE_AUDIT_LOGGING=True
AUDIT_LOG_RETENTION_DAYS=2555

# TCPA Compliance
TCPA_SAFE_TIME_START=08:00
TCPA_SAFE_TIME_END=21:00
ENABLE_TIMEZONE_COMPLIANCE=True

# ==============================================================================
# MONITORING & ANALYTICS
# ==============================================================================

# External monitoring services
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
DATADOG_API_KEY=

# Prometheus metrics
ENABLE_PROMETHEUS_METRICS=False
PROMETHEUS_METRICS_PORT=8001

# Real-time dashboard refresh rates (seconds)
DASHBOARD_REFRESH_RATE=5
WALLBOARD_REFRESH_RATE=3

# ==============================================================================
# API CONFIGURATION
# ==============================================================================

# API rate limiting
API_RATE_LIMIT_ANON=100/hour
API_RATE_LIMIT_USER=1000/hour

# JWT Token settings
JWT_ACCESS_TOKEN_LIFETIME=60
JWT_REFRESH_TOKEN_LIFETIME=10080
JWT_SIGNING_KEY=your-jwt-signing-key

# External API integrations
CRM_API_URL=https://api.yourcrm.com
CRM_API_KEY=your-crm-api-key

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================
# These settings are primarily used in development environment

# Django Debug Toolbar (development only)
ENABLE_DEBUG_TOOLBAR=True

# Development database (SQLite fallback)
DEV_DB_PATH=db.sqlite3

# Mock services for development
USE_MOCK_TELEPHONY=True
USE_MOCK_EMAIL=True

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# Log levels (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=WARNING

# Log file paths (production)
LOG_DIR=/var/log/vicidial
ERROR_LOG_FILE=/var/log/vicidial/errors.log
ACCESS_LOG_FILE=/var/log/vicidial/access.log

# Log rotation settings
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================

# SSL/HTTPS Configuration (production)
SECURE_SSL_REDIRECT=False
SECURE_HSTS_SECONDS=0
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https

# CORS settings (if needed for frontend)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# Session security
SESSION_COOKIE_AGE=28800
SESSION_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True

# ==============================================================================
# WEBSOCKET CONFIGURATION
# ==============================================================================

# WebSocket connection limits
WS_MAX_CONNECTIONS_PER_IP=10
WS_CONNECTION_TIMEOUT=300

# WebSocket channel layer capacity
CHANNEL_LAYER_CAPACITY=5000
CHANNEL_LAYER_EXPIRY=300

# ==============================================================================
# PERFORMANCE SETTINGS
# ==============================================================================

# Database connection pooling
DB_CONN_MAX_AGE=600
DB_CONN_HEALTH_CHECKS=True

# Cache timeout settings
CACHE_TIMEOUT=300
CACHE_KEY_PREFIX=vicidial

# File upload limits
DATA_UPLOAD_MAX_MEMORY_SIZE=5242880
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880

# ==============================================================================
# BACKUP & MAINTENANCE
# ==============================================================================

# Automated backup settings
ENABLE_AUTO_BACKUP=True
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/vicidial

# Maintenance mode
MAINTENANCE_MODE=False
MAINTENANCE_MESSAGE=System is currently under maintenance

# ==============================================================================
# END OF CONFIGURATION
# ==============================================================================
